# SCCS $Id: survexp.azr.s,v 4.5 2000-06-12 09:41:11 boos Exp $
#
# Create the Arizona hazards table, by race
#   The raw numbers below are q* 10^5.  Note that there are 24 leap years/100
#
survexp.azr  <- {
    #white
    temp1 <- c(
     1960,170,126,96,73,71,65,60,53,45,38,36,43,61,88,121,153,182,204,218,233,
     249,257,255,245,229,214,203,203,211,223,234,244,251,257,265,277,293,314,
     339,367,398,438,488,546,609,674,740,805,873,946,1029,1126,1240,1372,1518,
     1674,1838,2002,2166,2332,2508,2693,2891,3103,3319,3542,3786,4062,4371,
     4704,5055,5434,5843,6286,6797,7364,7932,8457,8950,9479,10116,10852,11703,
     12668,13924,15362,16847,18244,19512,20665,21873,23285,25039,27025,29014,
     30431,31784,33085,34324,35479,36553,37550,38471,39320,40101,40818,41475,
     42075,42624,1539,119,96,77,55,49,43,37,33,29,26,25,28,35,46,59,71,81,85,
     85,83,83,83,84,86,88,90,92,93,94,95,97,103,114,129,147,165,182,198,213,
     227,244,264,290,320,351,382,410,435,460,484,514,556,614,684,762,840,908,
     960,999,1035,1079,1137,1215,1312,1420,1534,1663,1811,1980,2167,2380,2636,
     2949,3318,3749,4232,4752,5291,5857,6505,7261,8071,8899,9747,10746,11907,
     13152,14441,15774,17202,18754,20370,22003,23631,25298,26762,28133,29413,
     30615,31742,32794,33772,34679,35517,36289,36999,37651,38248,38793,1375,
     138,90,75,62,53,48,43,36,27,20,18,27,49,80,111,138,160,175,185,194,203,
     208,209,207,204,200,197,195,196,196,197,197,198,200,204,209,217,227,241,
     256,277,306,345,391,445,501,557,608,658,708,766,837,925,1025,1131,1236,
     1341,1445,1552,1663,1784,1926,2090,2272,2458,2646,2851,3082,3344,3639,
     3955,4289,4634,4999,5419,5906,6435,6984,7557,8213,8994,9841,10700,11544,
     12506,13579,14708,15898,17159,18462,19838,21372,23083,24869,26617,28001,
     29311,30545,31703,32784,33791,34724,35588,36384,37117,37790,38407,38971,
     39486,988,105,71,44,33,30,25,21,18,15,13,13,17,24,33,43,51,57,61,61,62,63,
     64,65,66,67,69,70,73,76,79,82,86,91,97,105,113,122,130,138,148,160,175,
     195,218,244,272,300,326,352,380,409,441,475,512,548,586,634,696,770,855,
     943,1027,1103,1172,1238,1314,1412,1544,1710,1904,2110,2325,2540,2762,3010,
     3304,3646,4043,4497,5013,5600,6262,6999,7818,8816,9933,11074,12187,13306,
     14532,15917,17400,18960,20573,22228,23729,25173,26551,27859,29094,30255,
     31342,32355,33297,34168,34973,35715,36397,37022,
     911,82,65,48,40,33,29,26,21,17,13,14,22,39,63,89,113,133,146,154,162,
     170,174,174,172,168,166,166,171,179,188,197,205,212,218,225,233,244,
     259,276,296,316,336,355,375,399,428,460,494,531,572,623,684,757,840,
     931,1027,1129,1236,1346,1458,1575,1703,1843,1991,2135,2280,2447,2652,
     2898,3174,3467,3778,4099,4434,4803,5215,5659,6133,6651,7260,7970,8721,
     9458,10177,11132,12284,13564,14950,16431,18043,19814,21644,23392,
     24939,26329,27914,29399,30869,32413,34033,35735,37522,39398,41368,
     43436,45608,47888,50282,52797,724,67,47,37,28,25,21,18,16,14,13,13,15,
     20,26,34,41,47,51,54,57,60,61,60,59,57,55,55,56,57,59,61,65,69,75,82,
     90,98,106,113,121,130,142,158,179,204,231,257,278,297,317,344,375,414,
     459,509,562,622,685,752,818,887,960,1039,1122,1204,1288,1382,1496,
     1633,1791,1965,2160,2370,2593,2833,3102,3408,3764,4178,4658,5197,5790,
     6425,7116,7968,8970,10068,11233,12473,13889,15486,17113,18667,20174,
     21737,23434,25091,26715,28318,30017,31818,33727,35750,37895,40169,
     42579,45134,47842,50712)

    # non white
    temp2 <- c(
     1956,213,151,117,83,79,71,64,54,42,32,32,52,93,149,206,256,300,337,369,
     403,439,471,497,517,536,556,574,589,601,610,619,632,653,682,720,759,796,
     820,833,841,853,874,908,956,1010,1064,1120,1177,1234,1295,1361,1432,1506,
     1584,1668,1756,1839,1913,1985,2050,2128,2251,2436,2667,2920,3164,3378,
     3542,3667,3788,3923,4061,4207,4367,4520,4690,4944,5352,5956,6822,7957,
     9266,10379,11073,11737,12545,13381,14359,15486,16629,17735,18912,20146,
     21378,22554,23274,23944,24563,25135,25662,26146,26590,26996,27367,27706,
     28014,28295,28550,28782,1461,143,133,98,61,53,38,27,21,17,17,20,24,30,38,
     46,55,66,80,97,116,135,151,161,167,172,178,184,190,196,203,209,216,224,
     233,242,253,270,296,328,365,400,428,445,453,456,463,481,517,568,629,688,
     735,763,775,782,800,839,911,1014,1134,1262,1402,1538,1664,1787,1909,2026,
     2148,2285,2439,2612,2812,3027,3242,3460,3683,3900,4127,4391,4719,5129,
     5623,6146,6643,7312,8085,9015,10167,11510,12988,14398,15584,16480,17286,
     18279,19170,20022,20825,21577,22279,22930,23534,24091,24605,25077,25510,
     25907,26269,26600,
     1489,152,100,71,54,49,43,39,35,31,29,33,45,67,97,131,162,186,202,211,
     219,227,234,240,245,250,253,257,259,262,264,267,276,294,319,348,379,
     410,437,461,485,515,549,590,639,697,760,820,870,910,946,987,1045,1127,
     1231,1347,1463,1579,1690,1802,1921,2052,2194,2345,2502,2662,2830,3022,
     3254,3534,3853,4203,4591,4999,5416,5859,6328,6786,7227,7664,8122,8618,
     9145,9701,10280,11022,11839,12792,13953,15353,17065,19025,20909,22045,
     22410,22903,24048,25250,26513,27838,29230,30692,32226,33837,35529,
     37306,39171,41130,43186,45345,1135,98,65,52,47,39,33,29,25,22,20,20,
     21,26,33,40,48,57,66,75,85,94,102,106,108,108,109,111,113,116,119,122,
     126,132,139,148,157,168,178,190,202,217,235,256,282,313,348,384,417,
     449,480,515,557,609,669,735,801,860,910,957,999,1052,1141,1282,1461,
     1666,1867,2044,2180,2291,2402,2544,2728,2962,3231,3500,3770,4081,4471,
     4960,5578,6273,6945,7443,7736,7986,8364,8886,9637,10626,11795,13082,
     14466,15800,17048,18338,19682,21089,22557,23911,25346,26866,28478,
     30187,31998,33918,35953,38110,40397,42821)

    temp1 <- -log(1-temp1/100000)/365.24
    temp2 <- -log(1- c(temp2[1:220], temp2)/100000)/365.24

    # Add in the extrapolated data for 2000
    temp <- array(0, c(110,2, 2, 4))
    temp[,,1,1:3] <- temp1
    temp[,,2,1:3] <- temp2
    data.restore("survexp2000.sdump")
    temp[,,1,4]   <- exp(log(temp[,,1,3]) + survexp.2000[,,'white'])
    temp[,,2,4]   <- exp(log(temp[,,2,3]) + survexp.2000[,,'non-white'])

    attributes(temp) <- list (
	dim      =c(110,2,2,4),
	dimnames =list(0:109, c("male", "female"), c("white", "nonwhite"),
	                            10*197:200),
	dimid    =c("age", "sex", "race", "year"),
	factor   =c(0,1,1,10),
	cutpoints=list(0:109 * 365.24, NULL, NULL, mdy.date(1,1, 197:200*10)),
	summary = function(R) {
		     x <- c(format(round(min(R[,1]) /365.24, 1)),
			    format(round(max(R[,1]) /365.24, 1)),
			    sum(R[,2]==1), sum(R[,2]==2),
			    sum(R[,3]==1), sum(R[,3]==2))
		     x2<- as.character(as.date(c(min(R[,4]), max(R[,4]))))

		     paste("  age ranges from", x[1], "to", x[2], "years\n",
			   " male:", x[3], " female:", x[4], "\n",
			   " date of entry from", x2[1], "to", x2[2], "\n",
			   " white:",x[7], " nonwhite:", x[8], "\n")
		     })
    temp
    }
rm(temp, temp1, temp2, survexp.2000)
oldClass(survexp.azr) <- 'ratetable'
